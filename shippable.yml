build_image: node
language:
  - node_js
node_js:
  - 5
  - 4.2.0
branches:
  only:
    - master
    - develop
before_install:
  - SUDO=$(which sudo) && $SUDO apt-get install -y python-dev
  - SUDO=$(which sudo) && $SUDO pip install awsebcli
install:
  - npm install
env:
    global:
        - HOST=0.0.0.0 PORT=3000
before_script:
  - mkdir -p ~/.aws
  - echo '[profile eb-cli]' > ~/.aws/config
  - echo "aws_access_key_id = $AWSAccessKeyId" >> ~/.aws/config
  - echo "aws_secret_access_key = $AWSSecretKey" >> ~/.aws/config
commit_container: nilovna/shippable-test
after_success:
  - eb init && eb deploy --timeout 20
notifications:
  email: false
